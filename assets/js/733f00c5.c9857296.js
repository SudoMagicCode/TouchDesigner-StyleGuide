"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6451],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var i=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=i.createContext({}),d=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=d(e.components);return i.createElement(l.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=d(n),h=o,m=c["".concat(l,".").concat(h)]||c[h]||u[h]||a;return n?i.createElement(m,r(r({ref:t},p),{},{components:n})):i.createElement(m,r({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,r=new Array(a);r[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:o,r[1]=s;for(var d=2;d<a;d++)r[d]=n[d];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},6835:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var i=n(7462),o=(n(7294),n(3905));const a={title:"Modules",sidebar_position:1,description:"Python modules in TouchDesigner",slug:"/SM-guide/python-in-td/modules"},r="Modules",s={unversionedId:"SM-guide/python-in-td/py-mods",id:"SM-guide/python-in-td/py-mods",title:"Modules",description:"Python modules in TouchDesigner",source:"@site/docs/SM-guide/python-in-td/001-py-mods.md",sourceDirName:"SM-guide/python-in-td",slug:"/SM-guide/python-in-td/modules",permalink:"/docs/SM-guide/python-in-td/modules",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Modules",sidebar_position:1,description:"Python modules in TouchDesigner",slug:"/SM-guide/python-in-td/modules"},sidebar:"tutorialSidebar",previous:{title:"Python",permalink:"/docs/category/python"},next:{title:"Extensions",permalink:"/docs/SM-guide/python-in-td/extensions"}},l={},d=[{value:"Namespace Collisions",id:"namespace-collisions",level:2},{value:"When to use Modules",id:"when-to-use-modules",level:2},{value:"Links to Derivative&#39;s official docs",id:"links-to-derivatives-official-docs",level:2}],p={toc:d},c="wrapper";function u(e){let{components:t,...a}=e;return(0,o.kt)(c,(0,i.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"modules"},"Modules"),(0,o.kt)("p",null,"Python in TouchDesigner shares many of the characteristics of a pure Python development experience, but also has some distinct differences. Inside of TouchDesigner Text DATs behave as though they are text files. This allows us the flexability of writing generic Python functions in one DAT, and then calling that function in another - for example with a CHOP Execute DAT. The mechanics of this are defined in the ",(0,o.kt)("a",{parentName:"p",href:"https://docs.derivative.ca/MOD_Class"},"MOD Class")," wiki page, and cover three different ways you might import modules whose code is inside of DATs. "),(0,o.kt)("p",null,"This does, however, make for some interesting challenges and considerations. Specifically, committing to a defined paradigm for your namespace is critical when importing modules from Text DATs."),(0,o.kt)("h2",{id:"namespace-collisions"},"Namespace Collisions"),(0,o.kt)("p",null,"Consider the following scenario - in your project you want write a wrapper for the python ",(0,o.kt)("inlineCode",{parentName:"p"},"datetime")," library. It's not uncommon to want to modify standard libraries so they are a better fit for the TouchDesigner workflow, and writing a wrapper around a library like ",(0,o.kt)("inlineCode",{parentName:"p"},"datetime")," is something you might do. Feeling clever, you decide to change the name of your Text DAT to ",(0,o.kt)("inlineCode",{parentName:"p"},"datetime")," - since it is your new datetime library. "),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(1130).Z,width:"1381",height:"1008"})),(0,o.kt)("p",null,"What's not to love about this? Next you want to call your new functions from another DAT. You add another DAT to your network and ",(0,o.kt)("inlineCode",{parentName:"p"},"import datetime")," and call the functions you've just written."),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(7618).Z,width:"2742",height:"965"})),(0,o.kt)("p",null,"At this point everything is coming up roses",(0,o.kt)("sup",{parentName:"p",id:"fnref-1"},(0,o.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1")),". There is, however, a catch to this approach - what happens if we try to access the pure Python ",(0,o.kt)("inlineCode",{parentName:"p"},"datetime")," library from our ",(0,o.kt)("inlineCode",{parentName:"p"},"text1")," DAT?"),(0,o.kt)("p",null,(0,o.kt)("img",{src:n(4602).Z,width:"1887",height:"1872"})),(0,o.kt)("p",null,"Errors abound. We've now created a complicated namespace - we are both importing the standard Python library called ",(0,o.kt)("inlineCode",{parentName:"p"},"datetime")," and naming a Text DAT ",(0,o.kt)("inlineCode",{parentName:"p"},"datetime")," which we are importing in the context of TouchDesigner as ",(0,o.kt)("inlineCode",{parentName:"p"},"datetime"),". That means that only in our TextDAT version of ",(0,o.kt)("inlineCode",{parentName:"p"},"datetime")," can we access any of the other functions in this library - which is deeply confusing. Said another way, we've overridden the standard library with our own module and created a namespace mess. For this reason, it's worth adopting a naming schema that helps ensure that these types of collisions are less likely to occur. "),(0,o.kt)("p",null,"Generally speaking, we append ",(0,o.kt)("inlineCode",{parentName:"p"},"MOD")," to the end of any Text DAT that's treated as a module on demand. In our case that would mean naming our ",(0,o.kt)("inlineCode",{parentName:"p"},"datetime")," wrapper ",(0,o.kt)("inlineCode",{parentName:"p"},"datetimeMOD"),"."),(0,o.kt)("h2",{id:"when-to-use-modules"},"When to use Modules"),(0,o.kt)("p",null,"The use of the ",(0,o.kt)("inlineCode",{parentName:"p"},"mod")," class, and the ability to import Text DATs as modules on demand started with some of the earliest implementation of Python in TouchDesigner. This opened up a number of different avenues for working with Python, and also created spaces to define reusable code in Text DATs that could be used by many different execute Ops. This can be hugely beneficial with respect to maintaining a library of code that's used multiple places. That's a hugely powerful idea, especially in TouchDesigner, but it does have some limitations. One in particular being that it's difficult to maintain a persistent object or variable between executions. "),(0,o.kt)("p",null,"Any given Text DAT has an independent scope - which means that the ",(0,o.kt)("inlineCode",{parentName:"p"},"my_int")," of ",(0,o.kt)("inlineCode",{parentName:"p"},"text1")," isn't easily accessed by ",(0,o.kt)("inlineCode",{parentName:"p"},"text2"),". It is possible to declare a variable globally from within a DAT, but that's often messier than it might seem - when using global variables in Python the opportunity for namespace collisions is very high, especially when working in an environment like TouchDesigner. "),(0,o.kt)("admonition",{title:"SudoMagic Practice",type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"Our general practice is to avoid using global Python variables in any project code. ")),(0,o.kt)("h2",{id:"links-to-derivatives-official-docs"},"Links to Derivative's official docs"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://docs.derivative.ca/MOD_Class"},"MOD Class")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://derivative.ca/UserGuide/Python_Classes_and_Modules"},"Python Classes and Modules"))),(0,o.kt)("div",{className:"footnotes"},(0,o.kt)("hr",{parentName:"div"}),(0,o.kt)("ol",{parentName:"div"},(0,o.kt)("li",{parentName:"ol",id:"fn-1"},"For those unfamiliar, Ethel Merman's performance of ",(0,o.kt)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=s62MrU8mHx4&ab_channel=dougster2810"},"Everything's Coming Up Roses")," once was the bee's knees.",(0,o.kt)("a",{parentName:"li",href:"#fnref-1",className:"footnote-backref"},"\u21a9")))))}u.isMDXComponent=!0},1130:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/python-modules-01-352c7f2de6ad53343574d722d070b2b2.png"},7618:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/python-modules-02-02bb5175ca9821455e4678e5f1840cd6.png"},4602:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/python-modules-03-96b31e40d7e6c59140ae8ff74e0b33ad.png"}}]);